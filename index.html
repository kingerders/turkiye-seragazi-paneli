<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Türkiye Sera Gazı Emisyonları İnteraktif Gösterge Paneli (Türkiye GHG Emissions Interactive Dashboard)</title>
    <meta name="description" content="Türkiye'nin 1990-2023 arası sera gazı emisyon verilerinin interaktif analizi ve NDC hedefleri. Interactive analysis of Turkey's GHG emissions data (1990-2023) and NDC targets.">
    <meta name="keywords" content="Türkiye, sera gazı, emisyon, NDC, iklim değişikliği, TÜİK, Turkey, greenhouse gas, emissions, climate change">
    <meta name="author" content="Erdinç Ersoy">
    <link rel="canonical" href="https://kingerders.github.io/turkiye-seragazi-paneli/">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8723630978676321"
     crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding: 20px;
            font-size: 14px;
        }

        .container {
            width: 100%;
            max-width: none;
            margin: 0;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
        }

        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
            margin-left: 5px;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-1px);
        }

        .header {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-weight: 600;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            font-weight: 400;
        }

        .year-selector {
            background: #f8f9fa;
            padding: 25px;
            border-bottom: 1px solid #dee2e6;
        }

        .selector-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .tab-btn:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .tab-btn.active {
            background: #2563eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        .year-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            max-height: 220px;
            overflow-y: auto;
        }

        .year-buttons.hidden {
            display: none;
        }

        .year-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 55px;
        }

        .year-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .year-btn.active {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        .charts-container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            padding: 35px;
            justify-content: center;
        }

        .chart-section {
            flex: 1;
            min-width: 550px;
            background: #fdfdfd;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid #f1f3f4;
        }

        #trendSection, #ndcSection {
            flex: none;
            width: 100%;
            min-width: 100%;
        }

        .trend-charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 25px;
            margin-bottom: 40px;
        }

        .trend-charts-grid .chart-container {
            height: 300px;
        }

        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 12px;
            border-bottom: 2px solid #2563eb;
        }

        .chart-container {
            position: relative;
            height: 420px;
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
        }

        .year-info {
            background: #2563eb;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 25px;
        }

        .year-info h2 {
            font-size: 1.6em;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 18px;
            margin-top: 25px;
        }

        .stat-card {
            background: white;
            padding: 18px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            text-align: center;
            border: 1px solid #f1f3f4;
        }

        .stat-value {
            font-size: 1.4em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 6px;
        }

        .stat-label {
            font-size: 0.85em;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #6c757d;
        }

        .footer {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            text-align: center;
            padding: 25px;
            margin-top: 25px;
            font-size: 0.9em;
        }

        .footer a {
            color: #ffffff;
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            color: #e2e8f0;
            text-decoration: underline;
        }

        /* Responsive Design - Multiple Breakpoints */
        
        /* Extra Large Screens (1400px+) */
        @media (min-width: 1400px) {
            body {
                padding: 30px;
                font-size: 16px;
            }
            
            .header h1 {
                font-size: 3em;
            }
            
            .chart-container {
                height: 500px;
            }
        }

        /* Large Screens (1200px - 1399px) */
        @media (max-width: 1399px) and (min-width: 1200px) {
            body {
                padding: 25px;
                font-size: 15px;
            }
            
            .chart-container {
                height: 450px;
            }
        }

        /* Medium Screens (992px - 1199px) */
        @media (max-width: 1199px) and (min-width: 992px) {
            body {
                padding: 20px;
                font-size: 14px;
            }
            
            .trend-charts-grid {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
            }
            
            .chart-container {
                height: 400px;
            }
        }

        /* Small-Medium Screens (768px - 991px) */
        @media (max-width: 991px) and (min-width: 769px) {
            body {
                padding: 15px;
                font-size: 13px;
            }
            
            .charts-container {
                flex-direction: column;
                padding: 15px;
            }
            
            .chart-section {
                min-width: 100%;
                margin-bottom: 20px;
            }
            
            .trend-charts-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .chart-container {
                height: 350px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
        }

        /* Mobile Screens (480px - 768px) */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 12px;
            }
            
            .container {
                border-radius: 15px;
            }
            
            .charts-container {
                flex-direction: column;
                padding: 15px;
            }
            
            .chart-section {
                min-width: 100%;
                margin-bottom: 15px;
            }
            
            .trend-charts-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                gap: 15px;
            }
            
            .chart-container {
                height: 300px;
            }
            
            .year-buttons {
                max-height: 150px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }

            .tab-buttons {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .tab-btn {
                font-size: 11px;
                padding: 8px 12px;
            }
        }

        /* Small Mobile Screens (320px - 479px) */
        @media (max-width: 479px) {
            body {
                padding: 5px;
                font-size: 11px;
            }
            
            .container {
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .charts-container {
                padding: 10px;
            }
            
            .chart-container {
                height: 250px;
            }
            
            .tab-btn {
                font-size: 10px;
                padding: 6px 10px;
            }
            
            .year-btn {
                font-size: 10px;
                padding: 6px 8px;
            }
            
            .trend-charts-grid .chart-container {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="main-title">🇹🇷 Türkiye Sera Gazı Emisyonları Gösterge Paneli</h1>
            <p id="main-subtitle" style="font-size: 14px; color: rgba(255,255,255,0.8); margin-top: 3px;">(Türkiye GHG Emissions Dashboard)</p>
        </div>

        <div class="year-selector">
            <div class="selector-tabs">
                <button class="tab-btn active" id="yearlyTab" onclick="showYearlyView()">📊 Yıllık Veriler<br><span style="font-size: 10px; opacity: 0.8;">(Yearly Data)</span></button>
                <button class="tab-btn" id="trendTab" onclick="showTrendView()">📈 1990-2023 Trend<br><span style="font-size: 10px; opacity: 0.8;">(1990-2023 Trend)</span></button>
                <button class="tab-btn" id="ndcTab" onclick="showNDCView()">🎯 Türkiye NDC<br><span style="font-size: 10px; opacity: 0.8;">(Türkiye NDC)</span></button>
            </div>
            <div class="year-buttons" id="yearButtons">
                <!-- Year buttons will be populated here -->
            </div>
        </div>

        <div class="year-info" id="yearInfo">
            <h2 id="select-year-text">Bir Yıl Seçin</h2>
            <p id="select-year-desc">Detaylı emisyon verilerini görmek için yukarıdaki herhangi bir yıla tıklayın</p>
        </div>

        <div class="charts-container">
            <div class="chart-section" id="sectorsSection">
                <h3 class="chart-title" id="sectors-title">📊 Sektörlere Göre Sera Gazı Emisyonları</h3>
                <div class="chart-container">
                    <canvas id="sectorsChart"></canvas>
                </div>
                <div class="stats-grid" id="sectorsStats">
                    <!-- Sector stats will be populated here -->
                </div>
            </div>

            <div class="chart-section" id="ghgSection">
                <h3 class="chart-title" id="ghg-title">🏭 Sera Gazı Türüne Göre Emisyonlar</h3>
                <div class="chart-container">
                    <canvas id="ghgTypesChart"></canvas>
                </div>
                <div class="stats-grid" id="ghgTypesStats">
                    <!-- GHG types stats will be populated here -->
                </div>
            </div>

            <!-- Trend view section (initially hidden) -->
            <div class="chart-section" id="trendSection" style="display: none; width: 100%; flex: none;">
                <!-- Total emissions chart at the top -->
                <div style="margin-bottom: 40px;">
                    <h3 class="chart-title" style="text-align: center;">📈 Toplam Sera Gazı Emisyonları Trendi (1990-2023)</h3>
                    <p style="font-size: 11px; color: #666; text-align: center; margin-top: -10px; margin-bottom: 15px;">(Total GHG Emissions Trend (1990-2023))</p>
                    <div class="chart-container">
                        <canvas id="totalTrendChart"></canvas>
                    </div>
                </div>
                
                <!-- Four sector trend charts in a grid -->
                <div class="trend-charts-grid">
                    <div>
                        <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">🏭 Enerji Sektörü</h4>
                        <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Energy Sector)</p>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="energyTrendChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">⚙️ Endüstriyel İşlemler</h4>
                        <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Industrial Processes)</p>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="industrialTrendChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">🌾 Tarım</h4>
                        <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Agriculture)</p>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="agricultureTrendChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">🗑️ Atık</h4>
                        <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Waste)</p>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="wasteTrendChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- GHG Types trend charts in a grid -->
                <div style="margin-bottom: 40px;">
                    <h3 class="chart-title" style="text-align: center; margin-bottom: 30px;">🏭 Sera Gazı Türlerine Göre Emisyon Trendleri (1990-2023)</h3>
                    <p style="font-size: 11px; color: #666; text-align: center; margin-top: -25px; margin-bottom: 30px;">(GHG Types Emission Trends (1990-2023))</p>
                    <div class="trend-charts-grid">
                        <div>
                            <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">💨 CO₂</h4>
                            <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Carbon Dioxide)</p>
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="co2TrendChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">🔥 CH₄</h4>
                            <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Methane)</p>
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="ch4TrendChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">🌿 N₂O</h4>
                            <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(Nitrous Oxide)</p>
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="n2oTrendChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 style="text-align: center; margin-bottom: 5px; color: #34495e; font-size: 18px;">❄️ F-gazlar</h4>
                            <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 15px;">(F-gases)</p>
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="fgasesTrendChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="stats-grid" id="trendStats">
                    <!-- Trend stats will be populated here -->
                </div>
            </div>

            <!-- NDC view section (initially hidden) -->
            <div class="chart-section" id="ndcSection" style="display: none; width: 100%; flex: none;">
                <!-- NDC Information -->
                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 30px; border-left: 5px solid #2563eb;">
                    <h3 style="color: #2c3e50; margin-bottom: 5px;">🎯 Türkiye'nin Güncellenmiş İlk Ulusal Katkı Beyanı (NDC)</h3>
                    <p style="font-size: 11px; color: #666; margin-bottom: 15px;">(Turkey's Updated First Nationally Determined Contribution (NDC))</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
                            <h4 style="color: #2563eb; margin-bottom: 5px;">🎯 2030 Hedefi</h4>
                            <p style="font-size: 10px; color: #888; margin-bottom: 8px;">(2030 Target)</p>
                            <p><strong>%41 azaltım</strong> (695 Mt CO₂ eş.)</p>
                            <p style="font-size: 12px; color: #666;">BAU senaryosuna göre</p>
                            <p style="font-size: 10px; color: #888;">(41% reduction compared to BAU scenario)</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
                            <h4 style="color: #2563eb; margin-bottom: 5px;">📈 Emisyon Zirvesi</h4>
                            <p style="font-size: 10px; color: #888; margin-bottom: 8px;">(Emission Peak)</p>
                            <p><strong>En geç 2038</strong></p>
                            <p style="font-size: 12px; color: #666;">Emisyonların zirve yapacağı yıl</p>
                            <p style="font-size: 10px; color: #888;">(Latest by 2038 - Year of peak emissions)</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
                            <h4 style="color: #2563eb; margin-bottom: 5px;">🌱 Net Sıfır Hedefi</h4>
                            <p style="font-size: 10px; color: #888; margin-bottom: 8px;">(Net Zero Target)</p>
                            <p><strong>2053 yılı</strong></p>
                            <p style="font-size: 12px; color: #666;">Uzun vadeli net sıfır emisyon</p>
                            <p style="font-size: 10px; color: #888;">(Long-term net zero emissions by 2053)</p>
                        </div>
                    </div>
                    <p style="font-style: italic; color: #666; text-align: center; margin-top: 15px;">
                        Türkiye, gelişmekte olan bir ülke olarak küresel sera gazı emisyonlarına tarihsel katkısı %1'den azdır.
                    </p>
                    <p style="font-style: italic; color: #888; text-align: center; margin-top: 5px; font-size: 11px;">
                        (As a developing country, Turkey's historical contribution to global GHG emissions is less than 1%)
                    </p>
                </div>
                
                <!-- NDC Trajectory Chart -->
                <div style="margin-bottom: 30px;">
                    <h3 class="chart-title" style="text-align: center;">📊 Türkiye NDC Emisyon Patikası Projeksiyonu (2012-2053)</h3>
                    <p style="font-size: 11px; color: #666; text-align: center; margin-top: -10px; margin-bottom: 15px;">(Turkey NDC Emission Pathway Projection (2012-2053))</p>
                    <div class="chart-container" style="height: 500px;">
                        <canvas id="ndcTrajectoryChart"></canvas>
                    </div>
                </div>
                
                <!-- NDC Key Milestones -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="stat-card" style="background: linear-gradient(135deg, #6b7280, #4b5563); color: white;">
                        <div class="stat-value" style="color: white;">2012</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Referans Yıl: 456.3 Mt</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px; margin-top: 3px;">(Reference Year: 456.3 Mt)</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #2563eb, #1e40af); color: white;">
                        <div class="stat-value" style="color: white;">2023</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Mevcut Durum</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px; margin-top: 3px;">(Current Status)</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">
                        <div class="stat-value" style="color: white;">2030</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">NDC Hedefi: 695 Mt</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px; margin-top: 3px;">(NDC Target: 695 Mt)</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #3498db, #2980b9); color: white;">
                        <div class="stat-value" style="color: white;">2038</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Emisyon Zirvesi</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px; margin-top: 3px;">(Emission Peak)</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60); color: white;">
                        <div class="stat-value" style="color: white;">2053</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Net Sıfır Emisyon</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px; margin-top: 3px;">(Net Zero Emissions)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Google AdSense Otomatik Reklam -->
        <div style="text-align: center; padding: 20px; margin: 20px 0; background: #f8f9fa; border-radius: 12px;">
            <!-- Otomatik reklamlar head bölümündeki script ile yönetilir -->
        </div>

        <div class="footer">
            <p id="footer-text">Veri kaynağı: TÜİK (Türkiye İstatistik Kurumu) | Sera Gazı Emisyon İstatistikleri 1990-2023</p>
            <p style="font-size: 11px; color: rgba(255,255,255,0.8); margin-top: 3px;">(Data source: TURKSTAT (Turkish Statistical Institute) | GHG Emission Statistics 1990-2023)</p>
            <p style="margin-top: 10px;">Geliştiren: <a href="https://kingerders.github.io" target="_blank">kingerders</a> | <a href="https://kingerders.github.io/turkiye-seragazi-paneli" target="_blank">Proje Sayfası</a></p>
            <p style="font-size: 11px; color: rgba(255,255,255,0.8); margin-top: 3px;">(Developer: <a href="https://kingerders.github.io" target="_blank" style="color: rgba(255,255,255,0.8);">kingerders</a> | <a href="https://kingerders.github.io/turkiye-seragazi-paneli" target="_blank" style="color: rgba(255,255,255,0.8);">Project Page</a>)</p>
        </div>
    </div>

    <script>
        // Global variables
        let sectorsChart = null;
        let ghgTypesChart = null;
        let sectorsData = {};
        let ghgTypesData = {};
        let currentLanguage = 'tr';
        let currentView = 'yearly';

        // Language translations
        const translations = {
            tr: {
                mainTitle: '🇹🇷 Türkiye Sera Gazı Emisyonları Gösterge Paneli',
                mainSubtitle: 'Sektöre ve gaz türüne göre sera gazı emisyonlarının interaktif görselleştirmesi (1990-2023)',
                selectYear: 'Bir Yıl Seçin',
                selectYearDesc: 'Detaylı emisyon verilerini görmek için yukarıdaki herhangi bir yıla tıklayın',
                sectorsTitle: '📊 Sektörlere Göre Emisyonlar',
                ghgTitle: '🏭 Gaz Türüne Göre Emisyonlar',
                footerText: 'Veri kaynağı: TÜİK (Türkiye İstatistik Kurumu) | Sera Gazı Emisyon İstatistikleri 1990-2023',
                year: 'Yıl',
                totalEmissions: 'Toplam Sera Gazı Emisyonu:',
                millionTonnes: 'milyon ton CO₂ eşdeğeri',
                energy: 'Enerji',
                industrial: 'Sanayi',
                agriculture: 'Tarım',
                waste: 'Atık',
                errorLoading: 'Veri Yükleme Hatası',
                errorMessage: 'Lütfen JSON veri dosyalarının mevcut olduğundan emin olun.'
            },
            en: {
                mainTitle: '🇹🇷 Türkiye GHG Emissions Dashboard',
                mainSubtitle: 'Interactive visualization of greenhouse gas emissions by sector and gas type (1990-2023)',
                selectYear: 'Select a Year',
                selectYearDesc: 'Click on any year above to view detailed emissions data',
                sectorsTitle: '📊 Emissions by Sector',
                ghgTitle: '🏭 Emissions by Gas Type',
                footerText: 'Data source: TÜİK (Turkish Statistical Institute) | Greenhouse Gas Emission Statistics 1990-2023',
                year: 'Year',
                totalEmissions: 'Total GHG Emissions:',
                millionTonnes: 'million tonnes CO₂ equivalent',
                energy: 'Energy',
                industrial: 'Industrial',
                agriculture: 'Agriculture',
                waste: 'Waste',
                errorLoading: 'Error Loading Data',
                errorMessage: 'Please ensure the JSON data files are available.'
            }
        };

        // Show yearly view
        function showYearlyView() {
            currentView = 'yearly';
            
            // Update tab buttons
            document.getElementById('yearlyTab').classList.add('active');
            document.getElementById('trendTab').classList.remove('active');
            document.getElementById('ndcTab').classList.remove('active');
            
            // Show/hide sections
            document.getElementById('yearButtons').classList.remove('hidden');
            document.getElementById('sectorsSection').style.display = 'block';
            document.getElementById('ghgSection').style.display = 'block';
            document.getElementById('trendSection').style.display = 'none';
            document.getElementById('ndcSection').style.display = 'none';
            
            // Update year info
            const activeYear = document.querySelector('.year-btn.active');
            if (activeYear) {
                selectYear(parseInt(activeYear.textContent));
            } else {
                selectYear(2023);
            }
        }

        // Show trend view
        function showTrendView() {
            currentView = 'trend';
            
            // Update tab buttons
            document.getElementById('yearlyTab').classList.remove('active');
            document.getElementById('trendTab').classList.add('active');
            document.getElementById('ndcTab').classList.remove('active');
            
            // Show/hide sections
            document.getElementById('yearButtons').classList.add('hidden');
            document.getElementById('sectorsSection').style.display = 'none';
            document.getElementById('ghgSection').style.display = 'none';
            document.getElementById('trendSection').style.display = 'block';
            document.getElementById('ndcSection').style.display = 'none';
            
            // Update year info for trend view
            updateTrendInfo();
            
            // Wait for the DOM to fully update and container to be visible
            setTimeout(() => {
                // Force a reflow to ensure containers are visible
                const trendSection = document.getElementById('trendSection');
                trendSection.offsetHeight;
                
                // Create charts
                createTrendChart();
                
            }, 500);
        }

        // Show NDC view
        function showNDCView() {
            currentView = 'ndc';
            
            // Update tab buttons
            document.getElementById('yearlyTab').classList.remove('active');
            document.getElementById('trendTab').classList.remove('active');
            document.getElementById('ndcTab').classList.add('active');
            
            // Show/hide sections
            document.getElementById('yearButtons').classList.add('hidden');
            document.getElementById('sectorsSection').style.display = 'none';
            document.getElementById('ghgSection').style.display = 'none';
            document.getElementById('trendSection').style.display = 'none';
            document.getElementById('ndcSection').style.display = 'block';
            
            // Update year info for NDC view
            updateNDCInfo();
            
            // Wait for the DOM to fully update and container to be visible
            setTimeout(() => {
                // Force a reflow to ensure containers are visible
                const ndcSection = document.getElementById('ndcSection');
                ndcSection.offsetHeight;
                
                // Create NDC trajectory chart
                createNDCTrajectoryChart();
                
            }, 300);
        }

        // Update NDC info
        function updateNDCInfo() {
            const yearInfo = document.getElementById('yearInfo');
            yearInfo.innerHTML = `
                <h2>🎯 Türkiye NDC ve Net Sıfır Emisyon Yolu</h2>
                <p>Türkiye'nin güncellenmiş ilk Ulusal Katkı Beyanı (NDC) ve 2053 net sıfır emisyon hedefine ulaşım projeksiyonu</p>
            `;
        }

        // Create NDC trajectory chart
        function createNDCTrajectoryChart() {
            const canvas = document.getElementById('ndcTrajectoryChart');
            if (!canvas) {
                console.error('NDC trajectory chart canvas not found');
                return;
            }
            
            const ctx = canvas.getContext('2d');
            
            // Get the latest emission data (2023)
            const latestYear = Math.max(...Object.keys(sectorsData).map(year => parseInt(year)));
            const currentEmissions = sectorsData[latestYear]?.total || 520; // Fallback value
            
            // NDC trajectory data points (gerçek + projeksiyon veriler)
            const ndcYears = [2012, 2023, 2030, 2038, 2045, 2053]; // Orijinal 6 nokta
            
            // 2012-2023 arası tüm gerçek veriler (TÜİK)
            const realDataPoints = [
                {year: 2012, value: 456.3}, {year: 2013, value: 448.6}, {year: 2014, value: 467.8}, 
                {year: 2015, value: 481.3}, {year: 2016, value: 512.5}, {year: 2017, value: 533.5}, 
                {year: 2018, value: 530.6}, {year: 2019, value: 516.9}, {year: 2020, value: 531.9}, 
                {year: 2021, value: 573.8}, {year: 2022, value: 560.0}, {year: 2023, value: 552.2}
            ];
            
            // Gerçek verilerin trend hesaplama (linear regression benzeri)
            function calculateRealTrend() {
                const n = realDataPoints.length;
                let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;
                
                realDataPoints.forEach(point => {
                    sumX += point.year;
                    sumY += point.value;
                    sumXY += point.year * point.value;
                    sumX2 += point.year * point.year;
                });
                
                // Trend eğimi ve kesim noktası
                const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                const intercept = (sumY - slope * sumX) / n;
                
                return {slope, intercept};
            }
            
            const trend = calculateRealTrend();
            
            // 2012-2023 arası için trend çizgisi (sadece 2 nokta ama gerçek trende dayalı)
            const actualTrendEmissions = [
                456.3,  // 2012 gerçek
                552.2,  // 2023 gerçek  
                null, null, null, null // Projeksiyon yılları için null
            ];
            
            const ndcEmissions = [
                456.3,  // 2012 gerçek baseline
                552.2,  // 2023 gerçek
                695,    // 2030 NDC target
                734.1,  // 2038 peak emissions (updated)
                350,    // 2045 significant reduction
                0       // 2053 net zero
            ];
            
            // Business as Usual scenario (without NDC actions)
            const bauEmissions = [
                456.3,  // 2012 gerçek baseline
                552.2,  // 2023 gerçek
                1175, // 2030 BAU
                1300, // 2038 BAU
                1400, // 2045 BAU
                1450  // 2053 BAU
            ];

            // Properly check and destroy existing chart
            if (window.ndcTrajectoryChart && typeof window.ndcTrajectoryChart.destroy === 'function') {
                window.ndcTrajectoryChart.destroy();
            }

            try {
                window.ndcTrajectoryChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ndcYears,
                        datasets: [
                            {
                                label: 'Gerçek Emisyonlar (2012-2023)',
                                data: actualTrendEmissions,
                                borderColor: '#3498db',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                borderWidth: 4,
                                pointRadius: [8, 8, 0, 0, 0, 0], // Sadece 2012 ve 2023 noktaları
                                pointHoverRadius: [12, 12, 0, 0, 0, 0],
                                tension: 0.6, // Yüksek tension ile gerçek verilerin dalgalı trendini simüle et
                                fill: false,
                                pointBackgroundColor: ['#3498db', '#3498db', 'transparent', 'transparent', 'transparent', 'transparent'],
                                pointBorderColor: ['#3498db', '#3498db', 'transparent', 'transparent', 'transparent', 'transparent']
                            },
                            {
                                label: 'Business as Usual (BAU)',
                                data: bauEmissions,
                                borderColor: '#6b7280',
                                backgroundColor: 'rgba(107, 114, 128, 0.1)',
                                borderWidth: 3,
                                borderDash: [10, 5],
                                pointRadius: 5,
                                pointHoverRadius: 8,
                                tension: 0.1,
                                fill: false
                            },
                            {
                                label: 'NDC Patikası (Türkiye Taahhüdü)',
                                data: ndcEmissions,
                                borderColor: '#2ecc71',
                                backgroundColor: 'rgba(46, 204, 113, 0.1)',
                                borderWidth: 4,
                                pointRadius: 6,
                                pointHoverRadius: 10,
                                tension: 0.2,
                                fill: '+1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Yıl',
                                    font: { size: 16, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            },
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Milyon ton CO₂ eşdeğeri',
                                    font: { size: 16, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    usePointStyle: true,
                                    padding: 20,
                                    font: { size: 14 }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const value = context.parsed.y;
                                        const year = context.parsed.x;
                                        let suffix = ' Mt CO₂ eş.';
                                        
                                        // Add special annotations for key years
                                        if (year === 2030 && context.datasetIndex === 1) {
                                            suffix += ' (NDC Hedefi: %41 azaltım)';
                                        } else if (year === 2038 && context.datasetIndex === 1) {
                                            suffix += ' (Emisyon Zirvesi)';
                                        } else if (year === 2053 && context.datasetIndex === 1) {
                                            suffix += ' (Net Sıfır Hedef)';
                                        }
                                        
                                        return `${context.dataset.label}: ${value.toFixed(0)}${suffix}`;
                                    },
                                    afterLabel: function(context) {
                                        const year = context.parsed.x;
                                        const bauValue = bauEmissions[ndcYears.indexOf(year)];
                                        const ndcValue = ndcEmissions[ndcYears.indexOf(year)];
                                        
                                        if (context.datasetIndex === 1 && year >= 2030) {
                                            const reduction = bauValue - ndcValue;
                                            const percentage = ((reduction / bauValue) * 100).toFixed(0);
                                            return `BAU'ya göre ${reduction.toFixed(0)} Mt (%${percentage}) azaltım`;
                                        }
                                        return '';
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Force a resize to make sure it displays
                window.ndcTrajectoryChart.resize();
                
            } catch (error) {
                console.error('Error creating NDC trajectory chart:', error);
            }
        }

        // Create trend charts
        function createTrendChart() {
            if (Object.keys(sectorsData).length === 0) {
                console.error('No sectors data available');
                return;
            }
            
            createTotalTrendChart();
            createSectoralTrendCharts();
        }

        // Create total emissions trend chart
        function createTotalTrendChart() {
            const canvas = document.getElementById('totalTrendChart');
            if (!canvas) {
                console.error('Total trend chart canvas not found');
                return;
            }
            
            // Ensure canvas has proper size
            canvas.width = canvas.parentElement.offsetWidth || 800;
            canvas.height = canvas.parentElement.offsetHeight || 400;
            
            const ctx = canvas.getContext('2d');
            const years = Object.keys(sectorsData).map(year => parseInt(year)).sort((a, b) => a - b);
            const totalEmissions = years.map(year => sectorsData[year].total);

            // Properly check and destroy existing chart
            if (window.totalTrendChart && typeof window.totalTrendChart.destroy === 'function') {
                window.totalTrendChart.destroy();
            }

            try {
                window.totalTrendChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: years,
                        datasets: [{
                            label: 'Toplam Emisyon (Total Emissions)',
                            data: totalEmissions,
                            borderColor: '#2c3e50',
                            backgroundColor: 'rgba(44, 62, 80, 0.1)',
                            borderWidth: 4,
                            pointRadius: 6,
                            pointHoverRadius: 10,
                            tension: 0.1,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Yıl (Year)',
                                    font: { size: 14, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            },
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Milyon ton CO₂ eşdeğeri (Million tonnes CO₂ equivalent)',
                                    font: { size: 14, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    usePointStyle: true,
                                    padding: 20,
                                    font: { size: 14 }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(1)} Mt CO₂ eş.`;
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Force a resize to make sure it displays
                window.totalTrendChart.resize();
                
            } catch (error) {
                console.error('Error creating total trend chart:', error);
            }
        }

        // Create sectoral trend charts
        function createSectoralTrendCharts() {
            const years = Object.keys(sectorsData).map(year => parseInt(year)).sort((a, b) => a - b);
            const t = translations[currentLanguage];
            
            // Energy sector chart
            createSectorChart('energyTrendChart', 'energy', t.energy, '#2563eb', years);
            
            // Industrial processes chart
            createSectorChart('industrialTrendChart', 'industrial_processes', t.industrial, '#3498db', years);
            
            // Agriculture chart
            createSectorChart('agricultureTrendChart', 'agriculture', t.agriculture, '#2ecc71', years);
            
            // Waste chart
            createSectorChart('wasteTrendChart', 'waste', t.waste, '#f39c12', years);
            
            // Create GHG types trend charts
            createGHGTypesTrendCharts();
        }

        // Create GHG types trend charts
        function createGHGTypesTrendCharts() {
            if (Object.keys(ghgTypesData).length === 0) {
                console.error('No GHG types data available');
                return;
            }
            
            const years = Object.keys(ghgTypesData).map(year => parseInt(year)).sort((a, b) => a - b);
            
            // CO2 chart
            createGHGChart('co2TrendChart', 'co2', 'CO₂', '#e74c3c', years);
            
            // CH4 chart
            createGHGChart('ch4TrendChart', 'ch4', 'CH₄', '#f39c12', years);
            
            // N2O chart
            createGHGChart('n2oTrendChart', 'n2o', 'N₂O', '#3498db', years);
            
            // F-gases chart
            createGHGChart('fgasesTrendChart', 'f_gases', 'F-gazlar', '#2ecc71', years);
        }

        // Create individual GHG type chart
        function createGHGChart(canvasId, ghgKey, ghgLabel, color, years) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) {
                console.error(`Canvas ${canvasId} not found`);
                return;
            }
            
            const ctx = canvas.getContext('2d');
            const ghgData = years.map(year => ghgTypesData[year][ghgKey]);

            // Properly check and destroy existing chart
            if (window[canvasId] && typeof window[canvasId].destroy === 'function') {
                window[canvasId].destroy();
            }

            // Convert hex color to rgba
            function hexToRgba(hex, alpha) {
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                return `rgba(${r}, ${g}, ${b}, ${alpha})`;
            }

            try {
                window[canvasId] = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: years,
                        datasets: [{
                            label: ghgLabel,
                            data: ghgData,
                            borderColor: color,
                            backgroundColor: hexToRgba(color, 0.1),
                            borderWidth: 3,
                            pointRadius: 4,
                            pointHoverRadius: 8,
                            tension: 0.1,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Yıl (Year)',
                                    font: { size: 12, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            },
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Mt CO₂ eş.',
                                    font: { size: 12, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(1)} Mt CO₂ eş.`;
                                    }
                                }
                            }
                        }
                    }
                });
                
            } catch (error) {
                console.error(`Error creating ${canvasId} chart:`, error);
            }
        }

        // Create individual sector chart
        function createSectorChart(canvasId, sectorKey, sectorLabel, color, years) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) {
                console.error(`Canvas ${canvasId} not found`);
                return;
            }
            
            const ctx = canvas.getContext('2d');
            const sectorData = years.map(year => sectorsData[year][sectorKey]);

            // Properly check and destroy existing chart
            if (window[canvasId] && typeof window[canvasId].destroy === 'function') {
                window[canvasId].destroy();
            }

            // Convert hex color to rgba
            function hexToRgba(hex, alpha) {
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                return `rgba(${r}, ${g}, ${b}, ${alpha})`;
            }

            try {
                window[canvasId] = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: years,
                        datasets: [{
                            label: sectorLabel,
                            data: sectorData,
                            borderColor: color,
                            backgroundColor: hexToRgba(color, 0.1),
                            borderWidth: 3,
                            pointRadius: 4,
                            pointHoverRadius: 8,
                            tension: 0.1,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Yıl (Year)',
                                    font: { size: 12, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            },
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Mt CO₂ eş.',
                                    font: { size: 12, weight: 'bold' }
                                },
                                grid: { color: 'rgba(0,0,0,0.1)' }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(1)} Mt CO₂ eş.`;
                                    }
                                }
                            }
                        }
                    }
                });
                
            } catch (error) {
                console.error(`Error creating ${canvasId} chart:`, error);
            }
        }

        // Update trend info
        function updateTrendInfo() {
            const yearInfo = document.getElementById('yearInfo');
            const years = Object.keys(sectorsData).map(year => parseInt(year)).sort((a, b) => a - b);
            const firstYear = years[0];
            const lastYear = years[years.length - 1];
            const firstTotal = sectorsData[firstYear].total;
            const lastTotal = sectorsData[lastYear].total;
            const totalChange = lastTotal - firstTotal;
            const percentChange = ((totalChange / firstTotal) * 100).toFixed(1);
            
            yearInfo.innerHTML = `
                <h2>📈 Emisyon Trendi (${firstYear}-${lastYear})</h2>
                <p><strong>${firstYear}:</strong> ${firstTotal.toFixed(1)} Mt CO₂ eş. → <strong>${lastYear}:</strong> ${lastTotal.toFixed(1)} Mt CO₂ eş.</p>
                <p>Toplam değişim: <strong>${totalChange > 0 ? '+' : ''}${totalChange.toFixed(1)} Mt CO₂ eş. (${percentChange > 0 ? '+' : ''}${percentChange}%)</strong></p>
            `;

            // Update trend statistics
            updateTrendStatistics();
        }

        // Update trend statistics
        function updateTrendStatistics() {
            const trendStats = document.getElementById('trendStats');
            const years = Object.keys(sectorsData).map(year => parseInt(year)).sort((a, b) => a - b);
            const firstYear = years[0];
            const lastYear = years[years.length - 1];
            
            // Calculate average annual growth for total emissions
            const firstTotal = sectorsData[firstYear].total;
            const lastTotal = sectorsData[lastYear].total;
            const yearsDiff = lastYear - firstYear;
            const avgGrowth = (Math.pow(lastTotal / firstTotal, 1 / yearsDiff) - 1) * 100;
            
            // Find peak year
            let peakYear = firstYear;
            let peakValue = firstTotal;
            years.forEach(year => {
                if (sectorsData[year].total > peakValue) {
                    peakValue = sectorsData[year].total;
                    peakYear = year;
                }
            });

            // Calculate sectoral growth rates
            const sectorGrowths = {
                energy: ((sectorsData[lastYear].energy / sectorsData[firstYear].energy - 1) * 100),
                industrial: ((sectorsData[lastYear].industrial_processes / sectorsData[firstYear].industrial_processes - 1) * 100),
                agriculture: ((sectorsData[lastYear].agriculture / sectorsData[firstYear].agriculture - 1) * 100),
                waste: ((sectorsData[lastYear].waste / sectorsData[firstYear].waste - 1) * 100)
            };

            // Find fastest growing sector
            const t = translations[currentLanguage];
            const sectorNames = {
                energy: t.energy,
                industrial: t.industrial,
                agriculture: t.agriculture,
                waste: t.waste
            };

            let fastestGrowingSector = 'energy';
            let highestGrowth = sectorGrowths.energy;
            Object.keys(sectorGrowths).forEach(sector => {
                if (sectorGrowths[sector] > highestGrowth) {
                    highestGrowth = sectorGrowths[sector];
                    fastestGrowingSector = sector;
                }
            });
            
            trendStats.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${avgGrowth.toFixed(1)}%</div>
                    <div class="stat-label">Ortalama Yıllık Büyüme<br><small style="opacity:0.8">(Average Annual Growth)</small></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${peakYear}</div>
                    <div class="stat-label">En Yüksek Emisyon Yılı<br><small style="opacity:0.8">(Peak Emission Year)</small></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${peakValue.toFixed(1)}</div>
                    <div class="stat-label">En Yüksek Emisyon (Mt)<br><small style="opacity:0.8">(Peak Emission (Mt))</small></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${sectorNames[fastestGrowingSector]}</div>
                    <div class="stat-label">En Hızlı Büyüyen Sektör<br><small style="opacity:0.8">(Fastest Growing Sector)</small></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${highestGrowth.toFixed(1)}%</div>
                    <div class="stat-label">En Yüksek Sektörel Büyüme<br><small style="opacity:0.8">(Highest Sectoral Growth)</small></div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${((lastTotal - firstTotal) / firstTotal * 100).toFixed(1)}%</div>
                    <div class="stat-label">Toplam Değişim (1990-2023)<br><small style="opacity:0.8">(Total Change (1990-2023))</small></div>
                </div>
            `;
        }
        function setLanguage(lang) {
            currentLanguage = lang;
            
            // Update language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update all text elements
            updateLanguage();
            
            // Update charts if data is loaded
            if (Object.keys(sectorsData).length > 0) {
                const activeYear = document.querySelector('.year-btn.active');
                if (activeYear) {
                    selectYear(parseInt(activeYear.textContent));
                }
            }
        }

        // Update language function
        function updateLanguage() {
            const t = translations[currentLanguage];
            
            document.getElementById('main-title').textContent = t.mainTitle;
            document.getElementById('main-subtitle').textContent = t.mainSubtitle;
            document.getElementById('select-year-text').textContent = t.selectYear;
            document.getElementById('select-year-desc').textContent = t.selectYearDesc;
            document.getElementById('sectors-title').textContent = t.sectorsTitle;
            document.getElementById('ghg-title').textContent = t.ghgTitle;
            document.getElementById('footer-text').textContent = t.footerText;
        }

        // Initialize the dashboard
        async function initializeDashboard() {
            try {
                // Load data from JSON files
                const [sectorsResponse, ghgTypesResponse] = await Promise.all([
                    fetch('sectors_data.json'),
                    fetch('ghg_types_data.json')
                ]);

                sectorsData = await sectorsResponse.json();
                ghgTypesData = await ghgTypesResponse.json();

                // Create year buttons
                createYearButtons();

                // Set default year (2023)
                selectYear(2023);

            } catch (error) {
                console.error('Error loading data:', error);
                const t = translations[currentLanguage];
                document.getElementById('yearInfo').innerHTML = 
                    `<h2>${t.errorLoading}</h2><p>${t.errorMessage}</p>`;
            }
        }

        // Create year buttons
        function createYearButtons() {
            const yearButtons = document.getElementById('yearButtons');
            const years = Object.keys(sectorsData).map(year => parseInt(year)).sort((a, b) => a - b);
            
            yearButtons.innerHTML = '';
            years.forEach(year => {
                const button = document.createElement('button');
                button.className = 'year-btn';
                button.textContent = year;
                button.onclick = () => selectYear(year);
                yearButtons.appendChild(button);
            });
        }

        // Select a specific year
        function selectYear(selectedYear) {
            // Update active button
            document.querySelectorAll('.year-btn').forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.textContent) === selectedYear) {
                    btn.classList.add('active');
                }
            });

            // Update year info
            updateYearInfo(selectedYear);

            // Update charts
            updateSectorsChart(selectedYear);
            updateGHGTypesChart(selectedYear);

            // Update statistics
            updateStatistics(selectedYear);
        }

        // Update year info section
        function updateYearInfo(year) {
            const yearInfo = document.getElementById('yearInfo');
            const totalEmissions = sectorsData[year]?.total || 0;
            const t = translations[currentLanguage];
            
            yearInfo.innerHTML = `
                <h2>${t.year} ${year}</h2>
                <p>${t.totalEmissions} <strong>${totalEmissions.toFixed(1)} ${t.millionTonnes}</strong></p>
            `;
        }

        // Update sectors chart
        function updateSectorsChart(year) {
            const ctx = document.getElementById('sectorsChart').getContext('2d');
            const data = sectorsData[year];
            const total = data.total;
            const t = translations[currentLanguage];

            // Safely destroy existing chart
            if (sectorsChart && typeof sectorsChart.destroy === 'function') {
                try {
                    sectorsChart.destroy();
                } catch (e) {
                    console.warn('Error destroying sectorsChart:', e);
                }
            }

            // Calculate percentages
            const energyPercent = (data.energy / total * 100).toFixed(1);
            const industrialPercent = (data.industrial_processes / total * 100).toFixed(1);
            const agriculturePercent = (data.agriculture / total * 100).toFixed(1);
            const wastePercent = (data.waste / total * 100).toFixed(1);

            sectorsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [
                        `${t.energy} (${energyPercent}%)`,
                        `${t.industrial} (${industrialPercent}%)`,
                        `${t.agriculture} (${agriculturePercent}%)`,
                        `${t.waste} (${wastePercent}%)`
                    ],
                    datasets: [{
                        label: `Emisyonlar (Mt CO₂ eş.)`,
                        data: [
                            data.energy,
                            data.industrial_processes,
                            data.agriculture,
                            data.waste
                        ],
                        backgroundColor: [
                            '#3498db',  // Energy - Blue
                            '#f39c12',  // Industrial - Yellow  
                            '#2ecc71',  // Agriculture - Green
                            '#e74c3c'   // Waste - Red
                        ],
                        borderColor: [
                            '#2980b9',  // Energy - Dark Blue
                            '#e67e22',  // Industrial - Dark Yellow
                            '#27ae60',  // Agriculture - Dark Green
                            '#c0392b'   // Waste - Dark Red
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: currentLanguage === 'tr' ? 'Milyon ton CO₂ eşdeğeri' : 'Million tonnes CO₂ equivalent'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.y;
                                    const percentage = (value / total * 100).toFixed(1);
                                    const label = context.label.split(' (')[0];
                                    return `${label}: ${value.toFixed(1)} Mt CO₂ eş. (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update GHG types chart
        function updateGHGTypesChart(year) {
            const ctx = document.getElementById('ghgTypesChart').getContext('2d');
            const data = ghgTypesData[year];

            // Safely destroy existing chart
            if (ghgTypesChart && typeof ghgTypesChart.destroy === 'function') {
                try {
                    ghgTypesChart.destroy();
                } catch (e) {
                    console.warn('Error destroying ghgTypesChart:', e);
                }
            }

            ghgTypesChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['CO₂', 'CH₄', 'N₂O', 'F-gazlar'],
                    datasets: [{
                        data: [
                            data.co2,
                            data.ch4,
                            data.n2o,
                            data.f_gases
                        ],
                        backgroundColor: [
                            '#e74c3c',  // CO2 - Red
                            '#f39c12',  // CH4 - Yellow
                            '#3498db',  // N2O - Blue
                            '#2ecc71'   // F-gases - Green
                        ],
                        borderColor: [
                            '#c0392b',  // CO2 - Dark Red
                            '#e67e22',  // CH4 - Dark Yellow
                            '#2980b9',  // N2O - Dark Blue
                            '#27ae60'   // F-gases - Dark Green
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return `${context.label}: ${context.parsed.toFixed(1)} Mt CO₂ eş. (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update statistics
        function updateStatistics(year) {
            const sectorsStats = document.getElementById('sectorsStats');
            const ghgTypesStats = document.getElementById('ghgTypesStats');
            
            const sectorData = sectorsData[year];
            const ghgData = ghgTypesData[year];
            const sectorTotal = sectorData.total;
            const ghgTotal = ghgData.total;
            const t = translations[currentLanguage];

            // Calculate sector percentages
            const energyPercent = (sectorData.energy / sectorTotal * 100).toFixed(1);
            const industrialPercent = (sectorData.industrial_processes / sectorTotal * 100).toFixed(1);
            const agriculturePercent = (sectorData.agriculture / sectorTotal * 100).toFixed(1);
            const wastePercent = (sectorData.waste / sectorTotal * 100).toFixed(1);

            // Calculate GHG percentages
            const co2Percent = (ghgData.co2 / ghgTotal * 100).toFixed(1);
            const ch4Percent = (ghgData.ch4 / ghgTotal * 100).toFixed(1);
            const n2oPercent = (ghgData.n2o / ghgTotal * 100).toFixed(1);
            const fGasesPercent = (ghgData.f_gases / ghgTotal * 100).toFixed(1);

            // Sectors statistics
            sectorsStats.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${sectorData.energy.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">${t.energy} (${energyPercent}%)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${sectorData.industrial_processes.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">${t.industrial} (${industrialPercent}%)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${sectorData.agriculture.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">${t.agriculture} (${agriculturePercent}%)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${sectorData.waste.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">${t.waste} (${wastePercent}%)</div>
                </div>
            `;

            // GHG types statistics
            ghgTypesStats.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${ghgData.co2.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">CO₂ (${co2Percent}%)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${ghgData.ch4.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">CH₄ (${ch4Percent}%)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${ghgData.n2o.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">N₂O (${n2oPercent}%)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${ghgData.f_gases.toFixed(1)} <span style="font-size: 0.7em;">Mt CO₂ eş.</span></div>
                    <div class="stat-label">F-gazlar (${fGasesPercent}%)</div>
                </div>
            `;
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateLanguage();
            initializeDashboard();
        });
    </script>
    
    <!-- Google AdSense Otomatik Reklamları Aktivasyonu -->
         <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8723630978676321"
     crossorigin="anonymous"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-8723630978676321",
            enable_page_level_ads: true
        });
    </script>

</body>
</html>
